<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERSONAL — Preview Interativo</title>
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
/* ==================== DESIGN TOKENS ==================== */
:root{
  /* light */
  --ink:#0f1720; --ink-2:#6b7280;
  --bg:#f7f8fb; --panel:#ffffff;
  --border:rgba(20,26,40,.10);
  --glass:linear-gradient(180deg,rgba(255,255,255,.55),rgba(255,255,255,.3));
  --shadow:0 8px 30px rgba(8,15,35,.08);

  /* dark (neutro, sem azul) */
  --inkD:#e6e7eb; --ink-2D:#a9aeb7;
  --bgD:#0e0f12; --panelD:#131417;
  --borderD:rgba(255,255,255,.08);
  --glassD:linear-gradient(180deg,rgba(23,24,28,.66),rgba(19,20,24,.46));
  --shadowD:0 12px 40px rgba(0,0,0,.45);

  /* misc */
  --r:18px; --blur:18px; --t:.35s cubic-bezier(.2,.9,.2,1);
  --tone-quad: rgba(90,141,255,.10);
  --tone-post: rgba(36,197,140,.10);
  --tone-upper: rgba(168,96,255,.10);
  --tone-back: rgba(255,166,76,.12);
}

@media (prefers-reduced-motion: reduce){
  :root{ --t:.001s linear; }
}

/* ==================== BASE ==================== */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--ink);
  background:
    radial-gradient(1200px 600px at -10% -10%, var(--bg) 0%, var(--panel) 58%) fixed;
  transition:background var(--t), color var(--t);
}
body.dark{
  color:var(--inkD);
  background:
    radial-gradient(1200px 600px at -10% -10%, var(--bgD) 0%, var(--panelD) 58%) fixed;
}
.glass{
  background:var(--glass);
  border:1px solid var(--border);
  backdrop-filter:blur(var(--blur));
  box-shadow:var(--shadow);
  transition:background var(--t), border-color var(--t), box-shadow var(--t);
}
body.dark .glass{
  background:var(--glassD);
  border-color:var(--borderD);
  box-shadow:var(--shadowD);
}

.wrap{max-width:1120px;margin:0 auto;padding:18px 16px 96px}

/* ==================== HEADER ==================== */
.top{position:sticky;top:0;z-index:30;display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-radius:16px;margin:8px auto}
.brand{display:flex;align-items:center;gap:10px}
.logo{font-weight:900;letter-spacing:.2px}
.actions{display:flex;gap:10px;align-items:center}

.gbtn{width:44px;height:44px;border-radius:14px;display:grid;place-items:center;cursor:pointer;position:relative;overflow:hidden;isolation:isolate}
.gbtn::after{content:"";position:absolute;inset:0;background:radial-gradient(180px 180px at var(--x,50%) var(--y,50%),rgba(255,255,255,.25),transparent 50%);opacity:0;transition:opacity .25s}
.gbtn:hover::after{opacity:.6}
/* micro bounce */
.gbtn:hover{transform:translateY(-1px)}
.gbtn:active{transform:translateY(0) scale(.98)}

/* Weather mini */
.w-mini{display:flex;align-items:center;gap:8px;padding:6px 12px;border-radius:14px;font-weight:700}

/* ==================== SPOTLIGHT SEARCH ==================== */
.spot{position:fixed;inset:0;background:rgba(0,0,0,.28);display:grid;place-items:center;opacity:0;pointer-events:none;transition:opacity var(--t);z-index:60}
.spot.on{opacity:1;pointer-events:auto}
.spot-panel{width:min(92vw,720px);padding:16px;border-radius:20px;display:grid;gap:12px}
.spot-input{height:60px;border:none;outline:none;border-radius:14px;padding:0 16px;font-size:18px}

/* ==================== SEÇÕES (ACCORDION) ==================== */
.section{border-radius:22px;margin:16px 0;overflow:hidden}
.section[data-tone="quad"]{background:linear-gradient(0deg,var(--tone-quad),var(--tone-quad))}
.section[data-tone="post"]{background:linear-gradient(0deg,var(--tone-post),var(--tone-post))}
.section[data-tone="upper"]{background:linear-gradient(0deg,var(--tone-upper),var(--tone-upper))}
.section[data-tone="back"]{background:linear-gradient(0deg,var(--tone-back),var(--tone-back))}
.s-head{display:flex;align-items:center;justify-content:space-between;padding:12px}
.s-title{display:flex;align-items:center;gap:10px;margin:0;font-weight:900}
.s-toggle{width:40px;height:40px;border-radius:12px;display:grid;place-items:center;transition:transform var(--t)}
.s-toggle i{transition:transform var(--t)}
.section.collapsed .s-toggle i{transform:rotate(180deg)}
.s-body{padding:0 12px 12px;max-height:1200px;opacity:1;transform:none;transition:max-height .66s var(--t),opacity var(--t),transform var(--t)}
.section.collapsed .s-body{max-height:0;opacity:0;transform:translateY(-6px)}

/* ==================== CARDS ==================== */
.grid{display:grid;gap:12px}
@media(min-width:880px){.grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
.card{border-radius:16px;overflow:hidden}
.inner{padding:12px}
.title{margin:0 0 8px;font-weight:800}
.meta{display:flex;gap:10px;align-items:center;flex-wrap:wrap;color:var(--ink-2)}
body.dark .meta{color:var(--ink-2D)}
.pill{padding:6px 10px;border-radius:999px;font-size:12px}
.video{border-top:1px dashed var(--border);padding:10px}
body.dark .video{border-top:1px dashed var(--borderD)}
video{width:100%;border-radius:12px}

/* timer inline */
.timer-inline{display:flex;align-items:center;gap:6px;margin-left:auto}
.badge{min-width:58px;text-align:center;font-weight:800}

/* Toast */
.toast{position:fixed;left:50%;bottom:24px;transform:translateX(-50%) translateY(20px);opacity:0;padding:10px 14px;border-radius:14px;z-index:80}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0);transition:opacity .35s, transform .35s}

/* Upload modal */
.modal{position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.28);opacity:0;pointer-events:none;transition:opacity var(--t);z-index:70}
.modal.on{opacity:1;pointer-events:auto}
.modal-panel{width:min(92vw,560px);padding:16px;border-radius:20px;display:grid;gap:12px}
.input{border:none;outline:none;border-radius:12px;padding:12px 14px}
label.small{font-size:12px;opacity:.8}
.btn{padding:10px 14px;border-radius:12px;border:none;font-weight:700;cursor:pointer}
.btn:active{transform:scale(.98)}

/* Animated +/- icon morph */
.icon-plusminus{position:relative;width:18px;height:18px}
.icon-plusminus::before,
.icon-plusminus::after{content:"";position:absolute;left:0;right:0;top:50%;height:2px;border-radius:2px;background:currentColor;transform:translateY(-50%);transition:transform var(--t)}
.icon-plusminus::after{transform:translateY(-50%) rotate(90deg)}
/* when expanded (minus) */
.expanded .icon-plusminus::after{transform:translateY(-50%) rotate(0deg)}

/* Hover “spring-ish” (leve) para ícones principais */
.fx-hover{transition:transform .25s cubic-bezier(.2,1.5,.3,1)}
.fx-hover:hover{transform:translateY(-2px) scale(1.03)}
.fx-hover:active{transform:translateY(0) scale(.98)}
</style>
</head>
<body>

<header class="top glass">
  <div class="brand">
    <span class="logo">PERSONAL</span>
  </div>
  <div class="actions">
    <!-- Weather minimal -->
    <div class="w-mini glass fx-hover" id="wMini" title="Clima — Salvador, BR">
      <i id="wIcon" class="fa-solid fa-cloud-sun"></i>
      <span id="wTemp">--°</span>
    </div>
    <!-- Upload (Formspree) -->
    <button id="uploadBtn" class="gbtn glass fx-hover" title="Enviar foto/observação">
      <i class="fa-solid fa-camera"></i>
    </button>
    <!-- Tema -->
    <button id="themeBtn" class="gbtn glass fx-hover" title="Tema">
      <i class="fa-solid fa-moon"></i>
    </button>
    <!-- Busca -->
    <button id="spotBtn" class="gbtn glass fx-hover" title="Buscar">
      <i class="fa-solid fa-magnifying-glass"></i>
    </button>
  </div>
</header>

<main class="wrap">
  <!-- Seções (todas já com estrutura, iniciam fechadas) -->
  <section id="sec-quad" class="section glass collapsed" data-tone="quad">
    <div class="s-head">
      <h3 class="s-title"><i class="fa-solid fa-dumbbell"></i> Treino de Quadríceps</h3>
      <button class="s-toggle gbtn glass fx-hover" data-target="sec-quad" aria-expanded="false">
        <span class="icon-plusminus"></span>
      </button>
    </div>
    <div class="s-body">
      <div class="grid" id="grid-quad"></div>
    </div>
  </section>

  <section id="sec-post" class="section glass collapsed" data-tone="post">
    <div class="s-head">
      <h3 class="s-title"><i class="fa-solid fa-person-running"></i> Posterior & Glúteo</h3>
      <button class="s-toggle gbtn glass fx-hover" data-target="sec-post" aria-expanded="false">
        <span class="icon-plusminus"></span>
      </button>
    </div>
    <div class="s-body">
      <div class="grid" id="grid-post"></div>
    </div>
  </section>

  <section id="sec-upper" class="section glass collapsed" data-tone="upper">
    <div class="s-head">
      <h3 class="s-title"><i class="fa-solid fa-hand-fist"></i> Peito, Tríceps & Bíceps</h3>
      <button class="s-toggle gbtn glass fx-hover" data-target="sec-upper" aria-expanded="false">
        <span class="icon-plusminus"></span>
      </button>
    </div>
    <div class="s-body">
      <div class="grid" id="grid-upper"></div>
    </div>
  </section>

  <section id="sec-back" class="section glass collapsed" data-tone="back">
    <div class="s-head">
      <h3 class="s-title"><i class="fa-solid fa-backward"></i> Ombro & Costas</h3>
      <button class="s-toggle gbtn glass fx-hover" data-target="sec-back" aria-expanded="false">
        <span class="icon-plusminus"></span>
      </button>
    </div>
    <div class="s-body">
      <div class="grid" id="grid-back"></div>
    </div>
  </section>
</main>

<!-- Spotlight Search -->
<div class="spot" id="spot">
  <div class="spot-panel glass">
    <input class="spot-input glass" id="spotInput" placeholder="Buscar exercícios…"/>
    <div style="opacity:.7">Pressione ESC para fechar</div>
  </div>
</div>

<!-- Upload Modal (Formspree) -->
<div class="modal" id="uModal">
  <form id="uForm" class="modal-panel glass" enctype="multipart/form-data">
    <h3 style="margin:0 0 6px">Enviar foto / observação</h3>
    <label class="small">Foto (JPEG/PNG)</label>
    <input class="input glass" type="file" name="photo" accept="image/*" required>

    <label class="small">Observação</label>
    <textarea class="input glass" name="message" rows="4" placeholder="Escreva uma nota (opcional)"></textarea>

    <div style="display:flex;gap:8px;justify-content:flex-end">
      <button type="button" class="btn glass" id="uCancel">Cancelar</button>
      <button type="submit" class="btn glass" style="font-weight:800">Enviar</button>
    </div>
  </form>
</div>

<!-- Toast -->
<div id="toast" class="toast glass">Enviado!</div>

<script>
/* ==================== CONFIG ==================== */
const OPENWEATHER_API_KEY = "COLE_SUA_CHAVE_OPENWEATHER_AQUI"; // <— cole sua chave
const WEATHER_CITY = "Salvador,BR";
const FORMSPREE_ENDPOINT = "https://formspree.io/f/mzzavnrq";

/* ==================== THEME ==================== */
const themeBtn = document.getElementById('themeBtn');
function setTheme(dark){
  document.body.classList.toggle('dark', dark);
  themeBtn.innerHTML = dark ? '<i class="fa-solid fa-sun"></i>' : '<i class="fa-solid fa-moon"></i>';
  localStorage.setItem('theme', dark ? 'dark' : 'light');
}
setTheme(localStorage.getItem('theme')==='dark');
themeBtn.onclick = ()=> setTheme(!document.body.classList.contains('dark'));

/* ==================== SPOTLIGHT ==================== */
const spot = document.getElementById('spot');
const spotBtn = document.getElementById('spotBtn');
const spotInput = document.getElementById('spotInput');
spotBtn.onclick = ()=>{ spot.classList.add('on'); setTimeout(()=>spotInput.focus(),10); };
spot.onclick = e=>{ if(e.target===spot) spot.classList.remove('on'); };
document.addEventListener('keydown',e=>{ if(e.key==='Escape') spot.classList.remove('on'); });

/* ==================== WEATHER (minimal) ==================== */
async function loadWeather(){
  const tempEl = document.getElementById('wTemp');
  const iconEl = document.getElementById('wIcon');
  try{
    if(!OPENWEATHER_API_KEY || OPENWEATHER_API_KEY.startsWith('COLE_')) throw new Error('no key');
    const url = `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(WEATHER_CITY)}&units=metric&lang=pt_br&appid=${OPENWEATHER_API_KEY}`;
    const r = await fetch(url); if(!r.ok) throw new Error('net');
    const j = await r.json();
    tempEl.textContent = Math.round(j.main.temp)+'°';
    const code = (j.weather && j.weather[0] && j.weather[0].icon) || "01d";
    // map icon
    const day = code.includes('d');
    const wmap = { "01": "fa-sun", "02":"fa-cloud-sun", "03":"fa-cloud", "04":"fa-cloud", "09":"fa-cloud-showers-heavy", "10":"fa-cloud-rain", "11":"fa-cloud-bolt", "13":"fa-snowflake", "50":"fa-smog" };
    const k = wmap[code.slice(0,2)] || "fa-cloud-sun";
    iconEl.className = `fa-solid ${k}`;
    document.getElementById('wMini').title = `${WEATHER_CITY} — ${j.weather[0].description}`;
  }catch(e){
    tempEl.textContent = '28°'; // fallback
    iconEl.className = 'fa-solid fa-cloud-sun';
    document.getElementById('wMini').title = `${WEATHER_CITY} — mock`;
  }
}
loadWeather();

/* ==================== ACCORDION TOGGLES ==================== */
document.querySelectorAll('.s-toggle').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const id = btn.dataset.target;
    const sec = document.getElementById(id);
    const expanded = sec.classList.toggle('collapsed') ? false : true;
    btn.classList.toggle('expanded', expanded);
    btn.setAttribute('aria-expanded', expanded);
  });
});

/* ==================== DATA (exemplos) ==================== */
const DATA = {
  quad: [
    {n:'Agachamento Sumô com Halteres', s:'3×10/10/10 (Drop — 1 série)', c:'0 kg', i:60, v:'https://media.musclewiki.com/media/uploads/videos/branded/female-dumbbell-sumo-squat-front.mp4'},
    {n:'Leg Press 45°', s:'4×15 (pés colados) + 15 (afastados)', c:'12 kg', i:40, v:'https://media.musclewiki.com/media/uploads/videos/branded/female-Machine-leg-press-front.mp4'}
  ],
  post: [
    {n:'Agachamento com Halteres', s:'3×10+10+10 (Drop — 1 série)', c:'0 kg', i:60, v:'https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-front-rack-squat-side.mp4'},
    {n:'Elíptico', s:'25 reps', c:'0 kg', i:0, v:'https://media.musclewiki.com/media/uploads/videos/branded/female-Cardio-elliptical-side.mp4'}
  ],
  upper: [
    {n:'Tríceps Corda', s:'3×15 lento + 15 curto', c:'0 kg', i:30, v:'https://media.musclewiki.com/media/uploads/videos/branded/female-Cables-cable-push-down-side.mp4'},
    {n:'Crucifixo Inclinado', s:'4×12', c:'0 kg', i:30, v:'https://media.musclewiki.com/media/uploads/videos/branded/female-dumbbell-incline-chest-flys-side.mp4'}
  ],
  back: [
    {n:'Elevação Lateral Unilateral', s:'3×10/8/6 (Drop — 1 série)', c:'0 kg', i:30, v:'https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-neutral-overhead-press-side.mp4'},
    {n:'Puxada Neutra Triângulo', s:'3×10/8/6 (Drop — 1 série)', c:'0 kg', i:30, v:'https://media.musclewiki.com/media/uploads/videos/branded/cables/_1080/Seated_Row_V_Grip_FR_1080.mp4'}
  ]
};

function cardTpl(it, idx, key){
  const tId = `${key}-${idx}`;
  const hasTimer = Number(it.i) > 0;
  return `
  <article class="card glass">
    <div class="inner">
      <h4 class="title">${it.n}</h4>
      <div class="meta">
        <span class="pill glass"><i class="fa-solid fa-dumbbell"></i> ${it.s}</span>
        <span class="pill glass"><i class="fa-solid fa-weight-hanging"></i> ${it.c}</span>
        ${hasTimer ? `
        <div class="timer-inline">
          <span class="pill glass badge" data-badge="${tId}">${fmt(it.i)}</span>
          <button class="gbtn glass tplay" data-key="${key}" data-idx="${idx}" title="Iniciar/Pausar"><i class="fa-solid fa-play"></i></button>
          <button class="gbtn glass tstop" data-key="${key}" data-idx="${idx}" title="Zerar"><i class="fa-solid fa-stop"></i></button>
        </div>`:``}
      </div>
    </div>
    <div class="video"><video preload="metadata" src="${it.v}" controls playsinline></video></div>
  </article>`;
}

function render(){
  for(const key of Object.keys(DATA)){
    const grid = document.getElementById('grid-'+key);
    grid.innerHTML = DATA[key].map((it,i)=>cardTpl(it,i,key)).join('');
  }
  bindTimers();
}
render();

/* ==================== TIMERS ==================== */
const timers = {}; // { key-idx: {left, tick, running} }
function bindTimers(){
  document.querySelectorAll('.tplay').forEach(b=>{
    b.onclick = ()=>{
      const k = `${b.dataset.key}-${b.dataset.idx}`;
      const data = DATA[b.dataset.key][Number(b.dataset.idx)];
      if(!timers[k]) timers[k] = { left: Number(data.i)||0, tick:null, running:false };
      const t = timers[k];
      if(t.running){ clearInterval(t.tick); t.tick=null; t.running=false; b.innerHTML='<i class="fa-solid fa-play"></i>'; }
      else{
        if(t.left<=0) t.left = Number(data.i)||0;
        b.innerHTML='<i class="fa-solid fa-pause"></i>';
        t.running = true;
        t.tick = setInterval(()=>{
          t.left--; updateBadge(k, t.left);
          if(t.left<=0){ clearInterval(t.tick); t.tick=null; t.running=false; b.innerHTML='<i class="fa-solid fa-play"></i>'; toast('Intervalo concluído ✅'); }
        },1000);
      }
    };
  });
  document.querySelectorAll('.tstop').forEach(b=>{
    b.onclick = ()=>{
      const k = `${b.dataset.key}-${b.dataset.idx}`;
      const base = Number(DATA[b.dataset.key][Number(b.dataset.idx)].i)||0;
      if(!timers[k]) timers[k] = {left:base};
      timers[k].left = base;
      if(timers[k].tick){ clearInterval(timers[k].tick); timers[k].tick=null; }
      timers[k].running=false;
      updateBadge(k, base);
      const play = document.querySelector(`.tplay[data-key="${b.dataset.key}"][data-idx="${b.dataset.idx}"]`);
      if(play) play.innerHTML = '<i class="fa-solid fa-play"></i>';
    };
  });
}
function updateBadge(id, val){
  const el = document.querySelector(`[data-badge="${id}"]`);
  if(el) el.textContent = fmt(val);
}
function fmt(s){const m=String(Math.floor(s/60)).padStart(2,'0');const ss=String(s%60).padStart(2,'0');return `${m}:${ss}`}

/* ==================== UPLOAD (FORMSPREE) ==================== */
const uModal = document.getElementById('uModal');
const uploadBtn = document.getElementById('uploadBtn');
const uCancel = document.getElementById('uCancel');
const uForm = document.getElementById('uForm');

uploadBtn.onclick = ()=> uModal.classList.add('on');
uCancel.onclick = ()=> uModal.classList.remove('on');
uModal.onclick = (e)=>{ if(e.target===uModal) uModal.classList.remove('on'); };

uForm.addEventListener('submit', async (e)=>{
  e.preventDefault();
  const fd = new FormData(uForm);
  try{
    const r = await fetch(FORMSPREE_ENDPOINT, { method:'POST', body: fd, headers: { 'Accept':'application/json' } });
    const ok = r.ok;
    toast(ok? '✅ Enviado com sucesso' : '⚠️ Erro no envio');
    if(ok){ uModal.classList.remove('on'); uForm.reset(); }
  }catch(err){
    toast('⚠️ Erro de rede');
  }
});

/* ==================== TOAST ==================== */
const toastEl = document.getElementById('toast');
let toastTimer=null;
function toast(msg){
  toastEl.textContent = msg;
  toastEl.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(()=>toastEl.classList.remove('show'), 1600);
}

/* ==================== POINTER RIPPLES NOS BOTÕES ==================== */
document.querySelectorAll('.gbtn').forEach(btn=>{
  btn.addEventListener('pointermove', e=>{
    const r = btn.getBoundingClientRect();
    btn.style.setProperty('--x', (e.clientX - r.left) + 'px');
    btn.style.setProperty('--y', (e.clientY - r.top) + 'px');
  });
});
</script>
</body>
</html>
