<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PERSONAL ‚Äî Treinos (v6)</title>
<style>
  :root{
    --bg: #f0f5ff;
    --text: #1b1f2a;
    --muted:#667085;
    --glass: rgba(255,255,255,0.55);
    --glass-strong: rgba(255,255,255,0.7);
    --card: rgba(255,255,255,0.65);
    --accent: #7b6cff;
    --accent-2:#5ec2ff;
    --success:#30d7a9;
    --danger:#ff6b6b;
    --radius: 18px;
    --shadow: 0 8px 20px rgba(24,39,75,.08), 0 1px 2px rgba(0,0,0,.04);
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);
       background-image: radial-gradient(1200px 400px at -10% -20%, rgba(126, 102, 255, .12), transparent 60%),
                         radial-gradient(900px 300px at 110% 10%, rgba(94, 194, 255, .10), transparent 60%);
       color:var(--text);overflow-x:hidden;}
  header{position:sticky;top:0;z-index:100;padding:10px 16px;display:flex;align-items:center;gap:12px;justify-content:space-between;background:var(--glass);backdrop-filter:blur(14px) saturate(160%);border-radius:0 0 var(--radius) var(--radius);box-shadow:var(--shadow);}
  .brand{display:flex;align-items:center;gap:10px;font-weight:800;cursor:pointer;}
  .avatar{width:46px;height:46px;border-radius:50%;overflow:hidden;border:2px solid rgba(255,255,255,.6);flex-shrink:0;}
  .avatar img{width:100%;height:100%;object-fit:cover;display:block;}
  .actions{display:flex;align-items:center;gap:8px;}
  .bubble-btn{position:relative;padding:10px;border-radius:14px;background:var(--glass);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.45);cursor:pointer;box-shadow:var(--shadow);display:inline-flex;align-items:center;justify-content:center;}
  .bubble-btn svg{width:20px;height:20px;stroke:currentColor;stroke-width:1.6;fill:none;opacity:.9}
  .tooltip{position:absolute;bottom:125%;left:50%;transform:translateX(-50%);background:var(--text);color:#fff;padding:4px 8px;border-radius:6px;font-size:.7rem;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity .2s;}
  .bubble-btn:hover .tooltip{opacity:1;}
  .container{max-width:1000px;margin:6px auto 20px;padding:0 10px;}
  /* DASH */
  .dash{display:grid;grid-template-columns:1fr;gap:10px;padding:10px;margin:0 10px;}
  .stat-card{background:var(--glass);backdrop-filter:blur(12px);border-radius:var(--radius);padding:12px;box-shadow:var(--shadow);}
  .stat-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;gap:8px;}
  .stat-title{font-weight:800;}
  .meta-mini{color:var(--muted);font-size:.82rem;}
  .bar{height:10px;border-radius:999px;background:#e8ecf5;overflow:hidden;}
  .bar > span{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));transition:width .6s ease;}
  .week-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;align-items:end;margin-top:8px;}
  .vbar{height:64px;background:#eef2fb;border-radius:10px;display:flex;align-items:flex-end;justify-content:center;position:relative;overflow:hidden}
  .vbar span{display:block;width:100%;background:linear-gradient(180deg,var(--accent),var(--accent-2));height:0;transition:height .6s ease;}
  .vbar label{position:absolute;bottom:-18px;font-size:.72rem;color:var(--muted)}
  .dash-stat-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:10px;}
  .pill{background:var(--glass-strong);padding:8px;border-radius:12px;box-shadow:var(--shadow);text-align:center;font-weight:700}
  @media (min-width:740px){ .dash{grid-template-columns:1.2fr .8fr;} }

  /* Se√ß√µes */
  .section{margin:12px 0;border-radius:var(--radius);background:var(--glass);backdrop-filter:blur(12px);box-shadow:var(--shadow);}
  .section-header{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;cursor:pointer;user-select:none;}
  .section-title{display:flex;align-items:center;gap:10px;font-weight:900;}
  .badge{padding:6px 10px;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff;font-size:.72rem;font-weight:800;}
  .toggle{position:relative;width:28px;height:28px;display:inline-flex;align-items:center;justify-content:center;border-radius:12px;background:var(--glass-strong);border:1px solid rgba(255,255,255,.55);}
  .toggle .bar{position:absolute;background:currentColor;border-radius:2px;opacity:.9}
  .toggle .h{width:12px;height:2px;}
  .toggle .v{width:2px;height:12px;transition:opacity .2s ease;}
  .toggle.open .v{opacity:0;}
  .section-body{max-height:0;overflow:hidden;transition:max-height .5s ease,opacity .3s ease;opacity:0;padding:0 10px;}
  .section.open .section-body{opacity:1;padding:10px;}
  .grid{display:grid;grid-template-columns:1fr;gap:10px;}
  @media (min-width:720px){.grid{grid-template-columns:1fr 1fr;}}
  .card{position:relative;background:var(--card);border-radius:16px;padding:10px;box-shadow:var(--shadow);overflow:hidden;}
  .card h5{font-size:.95rem;margin-bottom:4px;}
  .meta{color:var(--muted);font-size:.82rem;margin-bottom:8px;}
  video{width:100%;border-radius:12px;margin-bottom:8px;background:#000;}
  .check{position:absolute;top:8px;right:8px;width:22px;height:22px;border-radius:8px;background:var(--glass);border:1px solid rgba(255,255,255,.6);display:grid;place-items:center;cursor:pointer;}
  .check svg{width:14px;height:14px;opacity:.35;stroke-width:2;stroke:#fff;fill:none}
  .card.done{outline:2px solid var(--success);box-shadow:0 0 0 3px rgba(48,215,169,.15);}
  .card.done .check{background:linear-gradient(135deg,#2ee5b3,#19c795);}
  .card.done .check svg{opacity:1;}
  .row{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap;}
  .btn{border:0;border-radius:12px;padding:8px 12px;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff;font-weight:700;cursor:pointer;box-shadow:var(--shadow);}
  .btn.secondary{background:var(--glass-strong);color:var(--text);}
  .btn.ghost{background:transparent;border:1px solid rgba(0,0,0,.08);color:var(--text);}
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:16px;background:var(--glass-strong);backdrop-filter:blur(12px);padding:8px 12px;border-radius:10px;box-shadow:var(--shadow);display:none;font-size:.88rem;z-index:300;}
  .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.25);z-index:200;}
  .modal-inner{width:min(520px,92vw);background:var(--glass);backdrop-filter:blur(14px);border-radius:16px;padding:14px;box-shadow:var(--shadow);}
  .drop{border:2px dashed rgba(0,0,0,.2);border-radius:12px;padding:20px;text-align:center;color:var(--muted);cursor:pointer;transition:border-color .2s, background .2s;}
  .drop.drag{border-color:var(--accent-2);background:rgba(94,194,255,.08);}
  footer{text-align:center;color:var(--muted);font-size:.8rem;padding:20px 0;}
  /* Focus mode */
  body.focus .dash{display:none;}
  body.focus main .section{opacity:.08;pointer-events:none;}
  body.focus .section .card.current{opacity:1 !important;pointer-events:auto !important;}
  body.focus header .brand span{opacity:.6;}
</style>
</head>
<body>
  <header>
    <div class="brand" id="avatarUpload">
      <div class="avatar"><img id="avatarImg" src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=200&auto=format&fit=crop" alt="avatar"/></div>
      <span>PERSONAL</span>
    </div>
    <div class="actions">
      <button class="bubble-btn" id="focusBtn" aria-label="Modo Foco">
        <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="8"></circle><path d="M12 7v10M7 12h10"></path></svg>
        <span class="tooltip">Modo Foco</span>
      </button>
      <button class="bubble-btn" id="uploadBtn" aria-label="Enviar foto">
        <svg viewBox="0 0 24 24"><path d="M3 7h4l2-3h6l2 3h4a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2z"></path><circle cx="12" cy="13" r="3"></circle></svg>
        <span class="tooltip">Enviar foto</span>
      </button>
      <button class="bubble-btn" id="resetBtn" aria-label="Resetar progresso">
        <svg viewBox="0 0 24 24"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.5 15a9 9 0 1 0 2.2-9.3L1 10"></path></svg>
        <span class="tooltip">Resetar progresso</span>
      </button>
      <button class="bubble-btn" id="historyBtn" aria-label="Hist√≥rico semanal">
        <svg viewBox="0 0 24 24"><path d="M3 4h18M3 12h18M3 20h18"/></svg>
        <span class="tooltip">Hist√≥rico</span>
      </button>
    </div>
  </header>

  <!-- DASH v6 -->
  <section class="dash">
    <div class="stat-card" id="weeklyWrap">
      <div class="stat-row">
        <div>
          <div class="stat-title">Resumo semanal</div>
          <div class="meta-mini">Meta <span id="goalVal">25</span> exerc√≠cios ‚Ä¢ <a href="#" id="editGoal" style="color:var(--accent);text-decoration:none;">definir</a></div>
        </div>
        <div style="min-width:120px">
          <div class="bar"><span id="goalBar"></span></div>
          <div class="meta-mini" style="text-align:right;margin-top:4px;"><span id="totalDone">0</span>/<span id="goalCap">25</span></div>
        </div>
      </div>
      <div class="week-grid">
        <div class="vbar"><span id="d0"></span><label>Dom</label></div>
        <div class="vbar"><span id="d1"></span><label>Seg</label></div>
        <div class="vbar"><span id="d2"></span><label>Ter</label></div>
        <div class="vbar"><span id="d3"></span><label>Qua</label></div>
        <div class="vbar"><span id="d4"></span><label>Qui</label></div>
        <div class="vbar"><span id="d5"></span><label>Sex</label></div>
        <div class="vbar"><span id="d6"></span><label>S√°b</label></div>
      </div>
      <div class="dash-stat-grid">
        <div class="pill">üóìÔ∏è <span id="activeDays">0</span> dias ativos</div>
        <div class="pill">üî• Melhor dia: <span id="bestDay">‚Äî</span></div>
        <div class="pill">‚úÖ Total: <span id="totalAll">0</span></div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-row">
        <div class="stat-title">Progresso recente</div>
        <div class="meta-mini">√∫ltimos 9 treinos</div>
      </div>
      <svg class="spark" viewBox="0 0 120 36" width="100%" height="28"><polyline id="sparkline" fill="none" stroke="url(#grad)" stroke-width="2" points="0,26 15,22 30,28 45,18 60,20 75,12 90,16 105,10 120,14"/></svg>
      <svg width="0" height="0"><defs><linearGradient id="grad" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="var(--accent)"/><stop offset="100%" stop-color="var(--accent-2)"/></linearGradient></defs></svg>
    </div>
  </section>

  <main class="container">
    <!-- ============= SE√á√ÉO 1: POSTERIOR & GL√öTEO ============= -->
    <section class="section open">
      <div class="section-header" onclick="toggleSection(this)">
        <div class="section-title"><span class="badge">Posterior & Gl√∫teo</span><span>Treino</span></div>
        <div class="toggle open" aria-label="Alternar se√ß√£o">
          <span class="bar h"></span><span class="bar v"></span>
        </div>
      </div>
      <div class="section-body">
        <div class="grid">
          <!-- 1 -->
          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Agachamento Sum√¥ com Halteres</h5>
            <div class="meta">S√©rie: 3x10/10/10 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 60s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-dumbbell-sumo-squat-front.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>
          <!-- 2 -->
          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Leg Press 45</h5>
            <div class="meta">S√©rie: 4x15 p√©s colados + 15 afastados ‚Ä¢ Carga: 12kg ‚Ä¢ Intervalo: 40s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Machine-leg-press-front.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>
          <!-- 3 -->
          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Adu√ß√£o de Quadril M√°quina</h5>
            <div class="meta">S√©rie: 3x10/10/10 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 60s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Machine-machine-hip-adduction-front.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>
          <!-- 4 -->
          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Cadeira Flexora</h5>
            <div class="meta">S√©rie: 3x10/10/10 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 60s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Machine-seated-leg-curl-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>
          <!-- 5 -->
          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Cadeira Flexora Unilateral</h5>
            <div class="meta">S√©rie: 3x10/10/10/10 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 60s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/machines/_1080/Seated_Leg_Curl_FR_1080.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>
          <!-- 6 -->
          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Panturrilha no Step</h5>
            <div class="meta">S√©rie: 4x15 ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-calves-stretch-variation-3-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>
          <!-- 7 -->
          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Abdominal Canivete</h5>
            <div class="meta">S√©rie: 4x15 ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-dumbbell-suitcase-crunch-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>
          <!-- 8 -->
          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Esteira Caminhada</h5>
            <div class="meta">S√©rie: 30 reps ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Cardio-treadmill-walk-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>
        </div>
      </div>
    </section>

    <!-- ============= SE√á√ÉO 2: QUADR√çCEPS ============= -->
    <section class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <div class="section-title"><span class="badge">Quadr√≠ceps</span><span>Treino</span></div>
        <div class="toggle" aria-label="Alternar se√ß√£o">
          <span class="bar h"></span><span class="bar v"></span>
        </div>
      </div>
      <div class="section-body">
        <div class="grid">
          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Agachamento com Halteres</h5>
            <div class="meta">S√©rie: 3x10+10+10 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 60s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-front-rack-squat-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Abdu√ß√£o de Quadril M√°quina</h5>
            <div class="meta">S√©rie: 3x10+10+10 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 60s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Machine-machine-hip-abduction-front.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>El√≠ptico</h5>
            <div class="meta">S√©ries: 25 reps ‚Ä¢ Intervalo: 40s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Cardio-elliptical-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Afundo com Barra Livre</h5>
            <div class="meta">S√©ries: 3x12, 3x10, 2x8 ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 60s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-barbell-reverse-lunge-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Agachamento Sum√¥ no Step com Halteres</h5>
            <div class="meta">S√©ries: 3x10+10+10 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 60s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/dumbbells/_1080/DB_Sumo_Squat_FR_1080.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Abdu√ß√£o de Quadril M√°quina</h5>
            <div class="meta">S√©ries: 3x10+10+10 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 60s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/machines/_1080/Hip_Abduction_FR_1080.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Cadeira Extensora</h5>
            <div class="meta">S√©ries: 3x10+10+10 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 60s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-machine-leg-extension-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Cadeira Extensora Unilateral</h5>
            <div class="meta">S√©ries: 3x10+10+10 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 60s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/machines/_1080/Single_Leg_Extension_FR_1080.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Leg Press 45 Unilateral</h5>
            <div class="meta">S√©ries: 3x12, 3x10, 2x8 ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 60s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/machines/_1080/Leg_Press_FR_1080.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>
        </div>
      </div>
    </section>

    <!-- ============= SE√á√ÉO 3: PEITO, TR√çCEPS E B√çCEPS ============= -->
    <section class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <div class="section-title"><span class="badge">Peito, Tr√≠ceps e B√≠ceps</span><span>Treino</span></div>
        <div class="toggle" aria-label="Alternar se√ß√£o">
          <span class="bar h"></span><span class="bar v"></span>
        </div>
      </div>
      <div class="section-body">
        <div class="grid">
          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Alongamento de Ombros e Tr√≠ceps II</h5>
            <div class="meta">S√©ries: 3x20 ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 40s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-shoulders-stretch-variation-1-front.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Bike Spinning Sentada</h5>
            <div class="meta">S√©ries: 40 reps ‚Ä¢ Intervalo: 40s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Cardio-stationary-bike-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Abdominal Supra Solo</h5>
            <div class="meta">S√©ries: 5x15 ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 40s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/bodyweight/_1080/Crunch_FR_1080.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Tr√≠ceps Unilateral na Polia Alta</h5>
            <div class="meta">S√©ries: 3x15 ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Cables-cable-single-arm-rope-pushdown-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Alongamento de Peitoral (Espaldar)</h5>
            <div class="meta">S√©ries: 3x15 ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 40s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-chest-stretch-variation-1-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Mobilidade de Ombro III</h5>
            <div class="meta">S√©rie: 3x20 ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 40s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Recovery-thoracic-extensions-via-shoulder-flexion-foam-roller-front.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Rosca Alternada com Halteres</h5>
            <div class="meta">S√©ries: 3x15 ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-curl-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Tr√≠ceps na Polia com Corda</h5>
            <div class="meta">S√©ries: 3x15 lento + 15 curto ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Cables-cable-push-down-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Tr√≠ceps Unilateral na Polia Alta</h5>
            <div class="meta">S√©ries: 3x15 ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Cables-cable-single-arm-rope-pushdown-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Crucifixo com Halteres</h5>
            <div class="meta">S√©ries: 4x12 ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-dumbbell-incline-chest-fly-front.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Crucifixo Inclinado com Halteres</h5>
            <div class="meta">S√©ries: 4x12 ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-dumbbell-incline-chest-flys-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Rosca Martelo com Halteres</h5>
            <div class="meta">S√©ries: 4x12 ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-hammer-curl-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>
        </div>
      </div>
    </section>

    <!-- ============= SE√á√ÉO 4: OMBRO & COSTA ============= -->
    <section class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <div class="section-title"><span class="badge">Ombro & Costa</span><span>Treino</span></div>
        <div class="toggle" aria-label="Alternar se√ß√£o">
          <span class="bar h"></span><span class="bar v"></span>
        </div>
      </div>
      <div class="section-body">
        <div class="grid">
          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Puxada Alta (pegada neutra)</h5>
            <div class="meta">S√©ries: 3x10/8/6 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-machine-pulldown-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Abdominal Canivete</h5>
            <div class="meta">S√©ries: 3x12 ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/bodyweight/_1080/V_Up_FR_1080.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Esteira Caminhada</h5>
            <div class="meta">S√©ries: 40 reps ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Cardio-treadmill-walk-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Eleva√ß√£o Lateral Unilateral Sentado</h5>
            <div class="meta">S√©ries: 3x10/8/6 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-front-raise-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Eleva√ß√£o Frontal Alternada</h5>
            <div class="meta">S√©ries: 3x12 ‚Ä¢ Carga: 4‚Äì6kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-front-raise-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Desenvolvimento com Halteres (pegada neutra)</h5>
            <div class="meta">S√©ries: 3x10/8/6 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/dumbbells/_1080/Neutral_Grip_DB_Press_FR_1080.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Puxada Neutra (tri√¢ngulo)</h5>
            <div class="meta">S√©ries: 3x10/8/6 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/cables/_1080/Seated_Row_V_Grip_FR_1080.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Remada Baixa Tri√¢ngulo</h5>
            <div class="meta">S√©ries: 3x10/8/6 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-machine-seated-cable-row-front.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>

          <article class="card">
            <div class="check" onclick="toggleDone(event,this)" title="Concluir exerc√≠cio"><svg viewBox='0 0 24 24'><path d='M20 6 9 17l-5-5'/></svg></div>
            <h5>Puxada Aberta Barra Reta</h5>
            <div class="meta">S√©ries: 3x10/8/6 Drop ‚Ä¢ Carga: 0kg ‚Ä¢ Intervalo: 30s</div>
            <video src="https://media.musclewiki.com/media/uploads/videos/branded/female-machine-pulldown-side.mp4" controls playsinline></video>
            <div class="row"><button class="btn ghost" onclick="openTimer(this)">‚è± Intervalo</button></div>
          </article>
        </div>
      </div>
    </section>
  </main>

  <!-- MODAL UPLOAD -->
  <div id="uploadModal" class="modal"><div class="modal-inner">
    <h3>Enviar foto</h3>
    <form id="uploadForm">
      <input type="hidden" name="to_email" value="cortesia0@hotmail.com">
      <input type="hidden" name="nome" value="Ramon">
      <div id="drop" class="drop">Arraste e solte a imagem ou <strong>clique</strong><input id="fileInput" type="file" name="attachment" accept="image/*" required style="display:none;" /></div>
      <div id="preview" style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap;"></div>
      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:10px;">
        <button type="button" class="btn secondary" onclick="closeUpload()">Cancelar</button>
        <button type="submit" class="btn">Enviar</button>
      </div>
    </form>
  </div></div>

  <!-- MODAL HIST√ìRICO -->
  <div id="historyModal" class="modal"><div class="modal-inner">
    <h3>Hist√≥rico semanal</h3><ul id="historyList" style="margin:10px 0 14px 16px;line-height:1.8;"></ul>
    <div class="row"><button class="btn secondary" onclick="closeHistory()">Fechar</button></div>
  </div></div>

  <!-- MODAL POMODORO -->
  <div id="timerModal" class="modal"><div class="modal-inner" style="text-align:center">
    <h3 id="timerTitle" style="margin-bottom:8px;">Intervalo</h3>
    <div id="timerDisplay" style="font-size:48px;font-weight:900;letter-spacing:.5px;margin:8px 0 4px;">00:30</div>
    <div style="color:var(--muted);margin-bottom:10px;" id="timerHint">Toque para iniciar / pausar</div>
    <div class="row" style="justify-content:center;">
      <button class="btn" id="timerStartPause">Iniciar</button>
      <button class="btn secondary" id="timerCancel">Cancelar</button>
    </div>
  </div></div>

  <div id="toast" class="toast"></div>
  <footer>¬© 2025 PERSONAL ‚Äî Soft UI</footer>

  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
  // ====== Util ======
  const qs = (s,el=document)=> el.querySelector(s);
  const qsa = (s,el=document)=> [...el.querySelectorAll(s)];
  function showToast(msg){const t=qs('#toast');t.textContent=msg;t.style.display='block';clearTimeout(t._h);t._h=setTimeout(()=>t.style.display='none',2500);}

  // ====== EmailJS (upload foto via sendForm: anexo real) ======
  emailjs.init("NoSQUcbjAnuG0LhrW"); // Public Key
  const uploadModal = qs('#uploadModal'); const drop = qs('#drop'); const input = qs('#fileInput');
  qs('#uploadBtn').addEventListener('click',()=> uploadModal.style.display='flex');
  function closeUpload(){ uploadModal.style.display='none'; }

  drop.addEventListener('click',()=> input.click());
  ;['dragover','dragenter'].forEach(evt=> drop.addEventListener(evt,e=>{e.preventDefault(); drop.classList.add('drag');}));
  ;['dragleave','dragend','drop'].forEach(evt=> drop.addEventListener(evt,e=>{drop.classList.remove('drag');}));
  drop.addEventListener('drop', e => { e.preventDefault(); if(e.dataTransfer.files?.length){ input.files = e.dataTransfer.files; renderPreview(); } });
  input.addEventListener('change', renderPreview);
  function renderPreview(){
    const pv = qs('#preview'); pv.innerHTML='';
    [...input.files].forEach(file=>{ const url=URL.createObjectURL(file); const img=new Image(); img.src=url; img.style.cssText='width:80px;height:80px;object-fit:cover;border-radius:10px;'; pv.appendChild(img); });
  }
  qs('#uploadForm').addEventListener('submit', function(e){
    e.preventDefault();
    if(!input.files.length){ showToast('‚ö†Ô∏è Escolha uma imagem'); return; }
    emailjs.sendForm("service_vg6xd6v","template_je6fsmc", this)
      .then(()=>{ showToast('üì§ Foto enviada para seu e-mail!'); this.reset(); qs('#preview').innerHTML=''; closeUpload(); },
            err=>{ console.error(err); showToast('‚ö†Ô∏è Erro ao enviar. Verifique service/template/key'); });
  });

  // ====== Avatar fixo ======
  const avatar = qs('#avatarUpload'); const avatarImg = qs('#avatarImg');
  const savedAvatar = localStorage.getItem('avatarData'); if(savedAvatar) avatarImg.src = savedAvatar;
  avatar.addEventListener('click', async ()=>{
    const ipt = document.createElement('input'); ipt.type = 'file'; ipt.accept = 'image/*';
    ipt.onchange = ()=>{ const file = ipt.files[0]; if(!file) return; const r = new FileReader();
      r.onload = e => { avatarImg.src = e.target.result; localStorage.setItem('avatarData', e.target.result); showToast('üñºÔ∏è Foto atualizada!'); };
      r.readAsDataURL(file);
    };
    ipt.click();
  });

  // ====== Hist√≥rico (dados brutos por dia) ======
  const dnames=['domingo','segunda-feira','ter√ßa-feira','quarta-feira','quinta-feira','sexta-feira','s√°bado'];
  function addHistory(){ const d = new Date(); const key = d.getDay(); const hist = JSON.parse(localStorage.getItem('history')||'{}'); hist[key]=(hist[key]||0)+1; localStorage.setItem('history', JSON.stringify(hist)); }
  function getHist(){ return JSON.parse(localStorage.getItem('history')||'{}'); }

  // ====== Resumo Semanal Din√¢mico ======
  let goal = parseInt(localStorage.getItem('weeklyGoal')||'25',10);
  const goalVal=qs('#goalVal'), goalCap=qs('#goalCap'), goalBar=qs('#goalBar');
  goalVal.textContent=goal; goalCap.textContent=goal;
  qs('#editGoal').addEventListener('click', (e)=>{ e.preventDefault(); const v = prompt('Defina a meta semanal (exerc√≠cios):', goal); if(!v) return; goal = Math.max(1, parseInt(v,10)||goal); localStorage.setItem('weeklyGoal', goal); goalVal.textContent=goal; goalCap.textContent=goal; renderWeekly(); });

  function renderWeekly(){
    const hist = getHist();
    let total=0, active=0, bestIdx=-1, bestVal=-1;
    for(let i=0;i<7;i++){
      const val = hist[i]||0;
      total += val;
      if(val>0) active++;
      if(val>bestVal){ bestVal=val; bestIdx=i; }
      const h = Math.min(100, val*10); // escala 10px por exerc√≠cio para feedback r√°pido
      qs('#d'+i).style.height = (h/100*100)+'%'; // usa % do container (64px de altura)
      qs('#d'+i).style.height = Math.min(100, val*12)+'%'; // um pouco mais agressivo visualmente
    }
    qs('#totalDone').textContent = Math.min(total, goal);
    qs('#totalAll').textContent = total;
    qs('#activeDays').textContent = active;
    qs('#bestDay').textContent = bestVal>0 ? dnames[bestIdx].split('-')[0] : '‚Äî';
    const pct = Math.min(100, (total/goal)*100);
    goalBar.style.width = pct+'%';
  }
  renderWeekly();

  // Modal hist√≥rico (lista)
  const historyModal = qs('#historyModal');
  qs('#historyBtn').addEventListener('click',()=>{ historyModal.style.display='flex'; renderHistoryList(); });
  function closeHistory(){ historyModal.style.display='none'; }
  function renderHistoryList(){ const hist = getHist(); const list = qs('#historyList'); list.innerHTML='';
    for(let i=0;i<7;i++){ const li=document.createElement('li'); li.textContent = `${dnames[i]}: ${hist[i]||0} exerc√≠cios`; list.appendChild(li); }
  }

  // ====== Progresso por cart√£o + stats ======
  function saveProgress(){ const doneIds = qsa('.card.done').map(c=>c.querySelector('h5').innerText); localStorage.setItem('doneCards', JSON.stringify(doneIds)); }
  function loadProgress(){ const done = JSON.parse(localStorage.getItem('doneCards')||'[]'); qsa('.card').forEach(c=>{ if(done.includes(c.querySelector('h5').innerText)) c.classList.add('done'); }); }
  loadProgress();
  function updateAllStats(){ renderWeekly(); updateSpark(); }
  function updateSpark(){
    // desenha uma ‚Äúfaixa‚Äù simples com base no hist√≥rico total acumulado por dia (√∫ltimos 9 valores simulados)
    const hist = getHist();
    const seq = [];
    for(let i=0;i<7;i++) seq.push(hist[i]||0);
    while(seq.length<9) seq.push(seq[seq.length-1]||0);
    const pts = seq.slice(-9).map((v,i)=> `${i*15},${Math.max(4, 26 - Math.min(22, v*2))}`).join(' ');
    qs('#sparkline').setAttribute('points', pts);
  }
  updateSpark();

  qs('#resetBtn').addEventListener('click', ()=>{
    qsa('.card.done').forEach(c=>c.classList.remove('done'));
    localStorage.removeItem('doneCards');
    localStorage.removeItem('history');
    showToast('‚úîÔ∏è Progresso resetado');
    updateAllStats();
  });

  function toggleDone(ev, el){
    ev.stopPropagation();
    const card = el.closest('.card');
    const section = card.closest('.section');
    const wasDone = card.classList.toggle('done');
    if(wasDone){ addHistory(); assistantTip('cooldown', 'üëè Bom trabalho! Conclu√≠do. Fa√ßa 2‚Äì3 min de alongamento leve.'); }
    saveProgress(); updateAllStats();
    // Se toda a se√ß√£o est√° conclu√≠da ‚Üí lembrete final
    const all = section.querySelectorAll('.card').length;
    const done = section.querySelectorAll('.card.done').length;
    if(all>0 && done===all){ assistantTip('section-finish', '‚úÖ Se√ß√£o finalizada! Finalize com alongamentos de 3‚Äì5 min.'); }
  }

  // ====== Abrir/fechar se√ß√µes ======
  function toggleSection(header){
    const section = header.closest('.section');
    const body = section.querySelector('.section-body');
    const icon = header.querySelector('.toggle');
    const open = section.classList.toggle('open');
    if(open){ icon.classList.add('open'); body.style.maxHeight = body.scrollHeight + 'px'; }
    else { icon.classList.remove('open'); body.style.maxHeight = 0; }
  }
  window.addEventListener('load', ()=>{
    qsa('.section').forEach(sec=>{
      const body = sec.querySelector('.section-body'); const icon = sec.querySelector('.toggle');
      if(sec.classList.contains('open')){ body.style.maxHeight = body.scrollHeight + 'px'; icon.classList.add('open'); }
      else { body.style.maxHeight = 0; icon.classList.remove('open'); }
    });
  });

  // ====== Modo Foco ======
  const focusBtn = qs('#focusBtn');
  let focusEnabled = JSON.parse(localStorage.getItem('focusEnabled')||'false');
  function applyFocus(){ document.body.classList.toggle('focus', !!focusEnabled); }
  applyFocus();
  focusBtn.addEventListener('click', ()=>{ focusEnabled = !focusEnabled; localStorage.setItem('focusEnabled', JSON.stringify(focusEnabled)); applyFocus(); showToast(focusEnabled? 'üéØ Modo Foco ON' : 'üéØ Modo Foco OFF'); });

  // ====== Pomodoro / Temporizador ======
  const timerModal = qs('#timerModal');
  const timerDisplay = qs('#timerDisplay');
  const timerTitle = qs('#timerTitle');
  const btnStartPause = qs('#timerStartPause');
  const btnCancel = qs('#timerCancel');
  let timer=null, remaining=0, running=false, total=0, currentCard=null;
  let audioCtx=null;

  function fmt(s){ s = Math.max(0, s|0); const m = Math.floor(s/60), x = (s%60); return (m<10?'0':'')+m+':' + (x<10?'0':'')+x; }
  function getIntervalSecondsFromCard(card){
    const meta = card.querySelector('.meta')?.innerText || '';
    const m = meta.match(/Intervalo:\s*(\d+)\s*s?/i);
    return m ? parseInt(m[1],10) : 60;
  }

  // ====== Assist√™ncia minimalista (aquecimento, postura, hidrata√ß√£o) ======
  let sessionStart = parseInt(localStorage.getItem('sessionStart')||'0',10);
  function ensureSession(){ const today = new Date(); const dayKey = today.toDateString();
    const lastKey = localStorage.getItem('sessionDay');
    if(lastKey !== dayKey){ sessionStart = Date.now(); localStorage.setItem('sessionStart', String(sessionStart)); localStorage.setItem('sessionDay', dayKey); shownWarmup=false; shownHydraAt=[]; }
  }
  ensureSession();

  const postureHints = [
    { k:/agachamento/i, t:"‚ö†Ô∏è Postura: coluna neutra, joelhos acompanhando a ponta dos p√©s." },
    { k:/leg\s*press/i, t:"‚ö†Ô∏è P√©s firmes, lombar apoiada no encosto durante o movimento." },
    { k:/adu[c√ß]√£o de quadril/i, t:"üí° Controle a volta (exc√™ntrico), sem soltar o peso." },
    { k:/flexora/i, t:"üí° Ajuste o banco para alinhar o joelho ao eixo da m√°quina." },
    { k:/eleva[c√ß][a√£]o (lateral|frontal)/i, t:"‚ö†Ô∏è Ombros longe das orelhas; controle na descida." },
    { k:/remada|puxada/i, t:"üí° Peito aberto, escapulas retra√≠das no final do movimento." },
    { k:/tr[√≠i]ceps/i, t:"üí° Cotovelos fixos, empurre com antebra√ßo." },
  ];
  function assistantTip(tag, text){ showToast(text); }

  let shownWarmup=false;
  let hydraTimer=null;
  let shownHydraAt = JSON.parse(localStorage.getItem('shownHydraAt')||'[]');

  function startHydrationLoop(){
    clearInterval(hydraTimer);
    hydraTimer = setInterval(()=>{
      if(!sessionStart) return;
      const mins = Math.floor((Date.now()-sessionStart)/60000);
      if(mins>0 && mins%20===0 && !shownHydraAt.includes(mins)){
        shownHydraAt.push(mins);
        localStorage.setItem('shownHydraAt', JSON.stringify(shownHydraAt));
        assistantTip('hydration', 'üíß Hidrata√ß√£o: beba √°gua agora.');
      }
    }, 60000); // checa a cada 1 min
  }
  startHydrationLoop();

  function openTimer(btn){
    ensureSession(); startHydrationLoop();
    const card = btn.closest('.card');
    currentCard = card;
    qsa('.card').forEach(c=>c.classList.remove('current'));
    card.classList.add('current');

    // Warmup antes do primeiro exerc√≠cio do dia
    if(!shownWarmup){
      assistantTip('warmup', 'üí° Aquecimento: 5 min de mobilidade leve + s√©rie leve do primeiro exerc√≠cio.');
      shownWarmup=true;
    }
    // Dica de postura contextual
    const name = card.querySelector('h5').innerText;
    const hint = postureHints.find(h=> h.k.test(name));
    if(hint) assistantTip('posture', hint.t);

    const secs = getIntervalSecondsFromCard(card);
    total = remaining = secs;
    timerTitle.textContent = name;
    timerDisplay.textContent = fmt(remaining);
    running=false; btnStartPause.textContent='Iniciar';
    timerModal.style.display='flex';
    if(focusEnabled){ document.body.classList.add('focus'); }
  }

  function vibrateStart(){ if(navigator.vibrate) navigator.vibrate(150); }
  function vibrateFive(){ if(navigator.vibrate) navigator.vibrate([200,100,200,100,200]); }
  function vibrateEnd(){ if(navigator.vibrate) navigator.vibrate([300,150,300,150,400]); }

  function beep(ms=180, freq=880){
    try{
      if(!audioCtx) audioCtx = new (window.AudioContext||window.webkitAudioContext)();
      const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
      o.type='sine'; o.frequency.value=freq; o.connect(g); g.connect(audioCtx.destination);
      g.gain.setValueAtTime(0.0001, audioCtx.currentTime);
      g.gain.exponentialRampToValueAtTime(0.3, audioCtx.currentTime+0.02);
      o.start();
      setTimeout(()=>{ g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime+0.02); o.stop(); }, ms);
    }catch(e){}
  }

  function tick(){
    remaining--;
    timerDisplay.textContent = fmt(remaining);
    if(remaining === total-1){ vibrateStart(); }           // in√≠cio
    if(remaining === 5){ vibrateFive(); beep(220, 1200); } // 5s finais
    if(remaining <= 0){
      clearInterval(timer); running=false; remaining=0;
      timerDisplay.textContent = '00:00';
      vibrateEnd(); beep(220, 880); setTimeout(()=>beep(220, 660), 250);
      showToast('‚úÖ Intervalo conclu√≠do!');
      timerModal.style.display='none';
      if(currentCard){ currentCard.classList.remove('current'); }
      if(focusEnabled){ document.body.classList.remove('focus'); }
    }
  }

  function start(){
    if(!running){
      try{ audioCtx && audioCtx.state==='suspended' && audioCtx.resume(); }catch(e){}
      running=true;
      btnStartPause.textContent='Pausar';
      tick(); // atualiza j√°
      timer = setInterval(tick, 1000);
    }
  }
  function pause(){
    if(running){ clearInterval(timer); running=false; btnStartPause.textContent='Retomar'; }
  }
  function toggleStartPause(){ running ? pause() : start(); }

  const timerModalEl = qs('#timerModal');
  const btnStartPauseEl = qs('#timerStartPause');
  const btnCancelEl = qs('#timerCancel');
  btnStartPauseEl.addEventListener('click', toggleStartPause);
  btnCancelEl.addEventListener('click', ()=>{ clearInterval(timer); running=false; timerModal.style.display='none';
    if(currentCard){ currentCard.classList.remove('current'); }
    if(focusEnabled){ document.body.classList.remove('focus'); }
  });

  // Fechar modais clicando fora
  [timerModalEl, uploadModal, historyModal].forEach(m => m.addEventListener('click', (e)=>{ if(e.target===m) m.style.display='none'; }));

  </script>
</body>
</html>
