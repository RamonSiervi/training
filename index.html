<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dieta ‚Ä¢ Treinos</title>
  <!-- Fonte do t√≠tulo -->
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@700;800&display=swap" rel="stylesheet" />
  <style>
    /* ====== RESET B√ÅSICO ====== */
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      background: #ffffff; /* Light only */
      color: #111;
    }

    /* ====== HEADER GLASS + T√çTULO ‚ÄúDieta‚Äù ====== */
    header.appbar {
      position: sticky; top: 0; z-index: 1000;
      display: flex; align-items: center; justify-content: space-between;
      padding: 14px 20px;
      background: rgba(255,255,255,0.72);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(0,0,0,0.06);
    }
    .brand {
      display: flex; align-items: center; gap: 12px;
    }
    .brand h1 {
      margin: 0;
      font-family: 'Sora', sans-serif;
      font-size: 28px;
      font-weight: 800;
      letter-spacing: .5px;
      position: relative;
      /* gradiente cinza suave (mais limpo que preto puro) */
      background: linear-gradient(90deg, #3a3a3a, #4d4d4d, #666666, #3a3a3a);
      background-size: 200% 100%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: titleGradient 6s linear infinite;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2); /* legibilidade no fundo branco */
    }
    @keyframes titleGradient {
      0% { background-position: 0% 50%; }
      100% { background-position: 200% 50%; }
    }
    .brand h1::after {
      content: "";
      position: absolute;
      top: 0; left: -25%;
      width: 50%; height: 100%;
      background: rgba(255,255,255,0.30); /* brilho clean */
      transform: skewX(-20deg) translateX(-100%);
      animation: titleShine 4s ease-in-out infinite;
      pointer-events: none;
    }
    @keyframes titleShine {
      0% { transform: skewX(-20deg) translateX(-120%); opacity: 0; }
      35% { opacity: 1; }
      65% { opacity: 1; }
      100% { transform: skewX(-20deg) translateX(220%); opacity: 0; }
    }

    /* √çcones do topo */
    .top-actions { display: flex; align-items: center; gap: 12px; position: relative; }
    .icon-btn {
      display: inline-flex; align-items: center; justify-content: center;
      width: 36px; height: 36px; border-radius: 14px;
      background: rgba(255,255,255,0.6);
      box-shadow: 0 4px 12px rgba(0,0,0,0.06), inset 0 0 0 1px rgba(0,0,0,0.06);
      cursor: pointer; user-select: none;
      transition: transform .12s ease, background .2s ease, box-shadow .2s ease;
      font-size: 18px;
    }
    .icon-btn:active { transform: scale(0.96); }

    /* Assistente: estados (indicador de cor discreto) */
    #assistantToggle.on { color: #22c55e; }      /* verde: texto + voz */
    #assistantToggle.textonly { color: #2563eb; }/* azul: s√≥ texto */
    #assistantToggle.off { color: #9ca3af; }     /* cinza: off */

    /* assistente: painel modo */
    .assistant-panel {
      position: absolute; right: 0; top: calc(100% + 8px);
      display: none; flex-direction: column; min-width: 180px;
      background: rgba(255,255,255,0.8); backdrop-filter: blur(12px);
      border-radius: 14px; box-shadow: 0 16px 30px rgba(0,0,0,0.14);
      overflow: hidden;
    }
    .assistant-panel button {
      background: transparent; border: 0; text-align: left;
      padding: 10px 14px; font-size: 14px; cursor: pointer;
      transition: background .15s ease;
    }
    .assistant-panel button:hover { background: rgba(0,0,0,0.05); }

    /* Toast (assistente e sistema) */
    .toast {
      position: fixed; z-index: 1200;
      left: 16px; bottom: 16px;
      max-width: 320px;
      padding: 12px 14px;
      border-radius: 16px;
      background: rgba(255,255,255,0.82);
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
      font-size: 14px; line-height: 1.35;
      opacity: 0; transform: translateY(16px);
      transition: opacity .35s ease, transform .35s ease;
      pointer-events: none;
    }
    .toast.show { opacity: 1; transform: translateY(0); }

    /* Pulse no √≠cone üí° quando h√° dica nova */
    @keyframes pulse { 0%{transform:scale(1);opacity:1;} 50%{transform:scale(1.2);opacity:.75;} 100%{transform:scale(1);opacity:1;} }
    #assistantToggle.pulse { animation: pulse .6s ease; }

    /* ====== CONTE√öDO / SE√á√ïES ====== */
    main { padding: 16px; max-width: 1100px; margin: 0 auto; }

    .section {
      border-radius: 24px;
      padding: 12px;
      margin-bottom: 18px;
      background: rgba(255,255,255,0.75);
      box-shadow: 0 8px 28px rgba(0,0,0,0.06), inset 0 0 0 1px rgba(0,0,0,0.05);
      overflow: hidden;
    }
    .section-header {
      display: flex; align-items: center; justify-content: space-between;
      padding: 10px 10px 6px 10px; cursor: pointer;
    }
    .section-title {
      font-weight: 700; font-size: 16px;
    }
    .section-toggle {
      width: 32px; height: 32px; border-radius: 12px;
      display: inline-flex; align-items: center; justify-content: center;
      background: rgba(255,255,255,0.6);
      box-shadow: 0 2px 8px rgba(0,0,0,0.06), inset 0 0 0 1px rgba(0,0,0,0.06);
      font-weight: 700; user-select: none;
      transition: transform .18s ease;
    }
    .section-toggle.rot { transform: rotate(180deg); }

    .section-content { padding: 6px 6px 12px; display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 12px; }
    .section-content.collapsed { display: none; }

    /* ====== CARD DE EXERC√çCIO ====== */
    .card {
      position: relative; border-radius: 20px; overflow: hidden;
      padding: 12px; display: flex; flex-direction: column; gap: 10px;
      background: rgba(255,255,255,0.72);
      box-shadow: 0 10px 24px rgba(0,0,0,0.08), inset 0 0 0 1px rgba(0,0,0,0.06);
      transition: transform .18s ease, box-shadow .18s ease, background .25s ease, opacity .25s ease;
    }
    .card:hover { transform: translateY(-1px); box-shadow: 0 12px 26px rgba(0,0,0,0.10), inset 0 0 0 1px rgba(0,0,0,0.07); }
    .card.done {
      background: rgba(255,255,255,0.45);
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.04);
      opacity: 0.85;
    }

    .card h3 { margin: 0; font-size: 15px; font-weight: 700; }
    .meta { font-size: 13px; color: #444; display: flex; flex-wrap: wrap; gap: 8px; }
    .meta span { background: rgba(0,0,0,0.035); padding: 4px 8px; border-radius: 10px; }

    /* V√≠deo + overlay */
    .video-wrap { position: relative; border-radius: 14px; overflow: hidden; }
    video.exercise {
      width: 100%; height: auto;
      transform-origin: center;
      transition: transform .15s ease, filter .2s ease;
    }
    .video-wrap:active video.exercise { transform: scale(1.02); }

    .overlay {
      position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;
      background: radial-gradient(transparent 50%, rgba(0,0,0,0.12));
      opacity: 0; transition: opacity .18s ease;
      pointer-events: none;
    }
    .overlay.show { opacity: 1; }
    .overlay .control {
      font-size: 48px; line-height: 1; filter: drop-shadow(0 4px 10px rgba(0,0,0,0.35));
    }

    /* A√ß√µes do card */
    .actions { display: flex; align-items: center; gap: 8px; }
    .btn {
      border: 0; cursor: pointer; user-select: none;
      border-radius: 12px; padding: 8px 10px; font-size: 13px; font-weight: 600;
      background: rgba(255,255,255,0.7);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08), inset 0 0 0 1px rgba(0,0,0,0.06);
      transition: transform .12s ease, background .2s ease, box-shadow .2s ease;
    }
    .btn:active { transform: scale(0.97); }
    .btn.ghost { background: rgba(0,0,0,0.04); }

    /* Concluir (bal√£o/√≠cone redondo glass) */
    .finish {
      width: 36px; height: 36px; border-radius: 50%;
      display: inline-flex; align-items: center; justify-content: center;
      background: rgba(255,255,255,0.7);
      box-shadow: 0 6px 16px rgba(0,0,0,0.10), inset 0 0 0 1px rgba(0,0,0,0.06);
      font-size: 18px; cursor: pointer; user-select: none;
      transition: transform .12s ease, background .2s ease, box-shadow .2s ease, filter .2s ease;
    }
    .finish:active { transform: scale(0.96); }
    .card.done .finish { filter: saturate(.2) contrast(.9); }

    /* Temporizador (por card) */
    .timer {
      position: relative;
      width: 118px; height: 118px;
      border-radius: 50%;
      background: conic-gradient(#16a34a var(--p, 0%), rgba(0,0,0,0.08) 0);
      display: none; align-items: center; justify-content: center;
      margin-left: auto;
      box-shadow: inset 0 0 0 8px rgba(0,0,0,0.05), 0 8px 20px rgba(0,0,0,0.08);
    }
    .timer.show { display: flex; }
    .timer strong { font-variant-numeric: tabular-nums; font-size: 22px; }

    /* Overlay de play/pause no timer (igual ao do v√≠deo) */
    .timer-overlay {
      position: absolute; inset: 0;
      display: flex; align-items: center; justify-content: center;
      background: radial-gradient(transparent 50%, rgba(0,0,0,0.1));
      opacity: 0; transition: opacity .18s ease;
      pointer-events: none;
      border-radius: 50%;
    }
    .timer-overlay.show { opacity: 1; }

    /* Ripple sutil ao clicar no timer */
    .ripple {
      position: absolute; inset: 0; border-radius: 50%;
      background: radial-gradient(rgba(22,163,74,0.25), transparent 60%);
      opacity: 0; transform: scale(0.9);
      pointer-events: none;
    }
    .ripple.play { animation: ripplePlay .45s ease; }
    .ripple.pause { animation: ripplePause .45s ease; }
    @keyframes ripplePlay { 0%{opacity:0;transform:scale(.9)} 20%{opacity:1} 100%{opacity:0;transform:scale(1.06)} }
    @keyframes ripplePause { 0%{opacity:0;transform:scale(.9)} 20%{opacity:1} 100%{opacity:0;transform:scale(1.06)} }

    /* Expande/colapsa tudo (topo) */
    .master-toggle { font-weight: 800; }

    /* Painel de configura√ß√£o visual (opcional e discreto) */
    .config {
      position: fixed; right: 16px; bottom: 16px; z-index: 1100;
      display: flex; align-items: stretch; gap: 8px;
      background: rgba(255,255,255,0.78); backdrop-filter: blur(10px);
      border-radius: 16px; box-shadow: 0 14px 28px rgba(0,0,0,0.12);
      padding: 8px;
    }
    .config label { font-size: 12px; color:#333; display:flex; align-items:center; gap:6px; }
    .config input[type="range"] { width: 140px; }

    /* Utilit√°rios */
    .row { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .spacer { flex: 1; }
    .muted { color: #666; }

    /* Acessibilidade m√≠nima de foco */
    :focus-visible { outline: 2px solid #2563eb; outline-offset: 2px; }
  </style>
</head>
<body>
  <!-- ====== APP BAR ====== -->
  <header class="appbar">
    <div class="brand">
      <h1 aria-label="Dieta">Dieta</h1>
    </div>
    <div class="top-actions">
      <button id="resetAll" class="icon-btn" title="Resetar tudo" aria-label="Resetar">üîÑ</button>
      <button id="expandAll" class="icon-btn master-toggle" title="Expandir/Recolher se√ß√µes" aria-label="Expandir/Recolher">Ôºã</button>

      <button id="assistantToggle" class="icon-btn" title="Assistente Minimalista" aria-label="Assistente">üí°</button>
      <div id="assistantPanel" class="assistant-panel" aria-label="Configura√ß√µes da Assistente">
        <button data-mode="voice">üîä Texto + Voz</button>
        <button data-mode="text">üìù S√≥ Texto</button>
        <button data-mode="off">‚≠ï Desligar</button>
      </div>
    </div>
  </header>

  <!-- ====== TOASTS ====== -->
  <div id="systemToast" class="toast" role="status" aria-live="polite"></div>
  <div id="assistantToast" class="toast" role="status" aria-live="polite" style="bottom: 86px;"></div>

  <!-- ====== PAINEL DE CONFIGURA√á√ÉO VISUAL ====== -->
  <div class="config" aria-label="Painel de configura√ß√£o visual">
    <label>üìπ Tamanho do v√≠deo
      <input id="videoScale" type="range" min="100" max="135" value="120" />
      <span id="videoScaleVal" class="muted">120%</span>
    </label>
  </div>

  <!-- ====== CONTE√öDO ====== -->
  <main id="content">
    <!-- Se√ß√£o Posterior & Gl√∫teo -->
    <section class="section" data-section="posterior">
      <div class="section-header">
        <div class="section-title"><span>Posterior &amp; Gl√∫teo</span> <span class="muted" data-count="posterior">(0/8)</span></div>
        <div class="section-toggle" role="button" aria-expanded="true">‚àí</div>
      </div>
      <div class="section-content">

        <!-- 1 Agachamento Sum√¥ com Halteres -->
        <article class="card" data-id="p1">
          <h3>Agachamento Sum√¥ com Halteres</h3>
          <div class="meta">
            <span>S√©ries: 3x10/10/10 (Drop ‚Äì tudo conta 1 s√©rie)</span>
            <span>Carga: 0kg</span><span>Intervalo: 60s</span>
          </div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-dumbbell-sumo-squat-front.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row">
            <button class="btn ghost interval" data-seconds="60">Intervalo 60s</button>
            <div class="finish" title="Concluir">‚ûî</div>
            <div class="spacer"></div>
            <div class="timer"><strong>00:60</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div>
          </div>
        </article>

        <!-- 2 Leg Press 45 -->
        <article class="card" data-id="p2">
          <h3>Leg Press 45</h3>
          <div class="meta">
            <span>S√©ries: 4x15 p√©s juntos + 15 afastados</span>
            <span>Carga: 12kg</span><span>Intervalo: 40s</span>
          </div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Machine-leg-press-front.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row">
            <button class="btn ghost interval" data-seconds="40">Intervalo 40s</button>
            <div class="finish" title="Concluir">‚ûî</div>
            <div class="spacer"></div>
            <div class="timer"><strong>00:40</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div>
          </div>
        </article>

        <!-- 3 Adu√ß√£o de Quadril M√°quina -->
        <article class="card" data-id="p3">
          <h3>Adu√ß√£o de Quadril M√°quina</h3>
          <div class="meta">
            <span>S√©ries: 3x10/10/10 (Drop)</span>
            <span>Carga: 0kg</span><span>Intervalo: 60s</span>
          </div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Machine-machine-hip-adduction-front.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row">
            <button class="btn ghost interval" data-seconds="60">Intervalo 60s</button>
            <div class="finish" title="Concluir">‚ûî</div>
            <div class="spacer"></div>
            <div class="timer"><strong>00:60</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div>
          </div>
        </article>

        <!-- 4 Cadeira Flexora -->
        <article class="card" data-id="p4">
          <h3>Cadeira Flexora</h3>
          <div class="meta">
            <span>S√©ries: 3x10/10/10 (Drop)</span>
            <span>Carga: 0kg</span><span>Intervalo: 60s</span>
          </div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Machine-seated-leg-curl-side.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row">
            <button class="btn ghost interval" data-seconds="60">Intervalo 60s</button>
            <div class="finish" title="Concluir">‚ûî</div>
            <div class="spacer"></div>
            <div class="timer"><strong>00:60</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div>
          </div>
        </article>

        <!-- 5 Cadeira Flexora Unilateral -->
        <article class="card" data-id="p5">
          <h3>Cadeira Flexora Unilateral</h3>
          <div class="meta">
            <span>S√©ries: 3x10/10/10/10 (Drop)</span>
            <span>Carga: 0kg</span><span>Intervalo: 60s</span>
          </div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/machines/_1080/Seated_Leg_Curl_FR_1080.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row">
            <button class="btn ghost interval" data-seconds="60">Intervalo 60s</button>
            <div class="finish" title="Concluir">‚ûî</div>
            <div class="spacer"></div>
            <div class="timer"><strong>00:60</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div>
          </div>
        </article>

        <!-- 6 Panturrilha no Step -->
        <article class="card" data-id="p6">
          <h3>Panturrilha no Step</h3>
          <div class="meta">
            <span>S√©ries: 4x15</span>
            <span>Carga: 0kg</span><span>Intervalo: 30s</span>
          </div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-calves-stretch-variation-3-side.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row">
            <button class="btn ghost interval" data-seconds="30">Intervalo 30s</button>
            <div class="finish" title="Concluir">‚ûî</div>
            <div class="spacer"></div>
            <div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div>
          </div>
        </article>

        <!-- 7 Abdominal Canivete -->
        <article class="card" data-id="p7">
          <h3>Abdominal Canivete</h3>
          <div class="meta">
            <span>S√©ries: 4x15</span>
            <span>Carga: 0kg</span><span>Intervalo: 30s</span>
          </div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-dumbbell-suitcase-crunch-side.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row">
            <button class="btn ghost interval" data-seconds="30">Intervalo 30s</button>
            <div class="finish" title="Concluir">‚ûî</div>
            <div class="spacer"></div>
            <div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div>
          </div>
        </article>

        <!-- 8 Esteira Caminhada -->
        <article class="card" data-id="p8">
          <h3>Esteira Caminhada</h3>
          <div class="meta">
            <span>S√©ries: 30 reps</span>
          </div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Cardio-treadmill-walk-side.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row">
            <button class="btn ghost interval" data-seconds="30">Intervalo 30s</button>
            <div class="finish" title="Concluir">‚ûî</div>
            <div class="spacer"></div>
            <div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div>
          </div>
        </article>

      </div>
    </section>

    <!-- Se√ß√£o Quadr√≠ceps -->
    <section class="section" data-section="quad">
      <div class="section-header">
        <div class="section-title"><span>Quadr√≠ceps</span> <span class="muted" data-count="quad">(0/9)</span></div>
        <div class="section-toggle" role="button" aria-expanded="true">‚àí</div>
      </div>
      <div class="section-content">

        <article class="card" data-id="q1">
          <h3>Agachamento com Halteres</h3>
          <div class="meta"><span>S√©ries: 3x10+10+10 (Drop)</span><span>Carga: 0kg</span><span>Intervalo: 60s</span></div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-front-rack-squat-side.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row"><button class="btn ghost interval" data-seconds="60">Intervalo 60s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:60</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="q2">
          <h3>Abdu√ß√£o de Quadril M√°quina</h3>
          <div class="meta"><span>S√©ries: 3x10+10+10 (Drop)</span><span>Carga: 0kg</span><span>Intervalo: 60s</span></div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Machine-machine-hip-abduction-front.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row"><button class="btn ghost interval" data-seconds="60">Intervalo 60s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:60</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="q3">
          <h3>El√≠ptico</h3>
          <div class="meta"><span>S√©ries: 25 reps</span><span>Carga: 0kg</span></div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Cardio-elliptical-side.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row"><button class="btn ghost interval" data-seconds="40">Intervalo 40s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:40</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="q4">
          <h3>Afundo com Barra Livre</h3>
          <div class="meta"><span>S√©ries: 3x12 ‚Ä¢ 3x10 ‚Ä¢ 2x8</span><span>Carga: 0kg</span><span>Intervalo: 60s</span></div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-barbell-reverse-lunge-side.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row"><button class="btn ghost interval" data-seconds="60">Intervalo 60s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:60</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="q5">
          <h3>Agachamento Sum√¥ no Step com Halteres</h3>
          <div class="meta"><span>S√©ries: 3x10+10+10 (Drop)</span><span>Carga: 0kg</span><span>Intervalo: 60s</span></div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/dumbbells/_1080/DB_Sumo_Squat_FR_1080.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row"><button class="btn ghost interval" data-seconds="60">Intervalo 60s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:60</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="q6">
          <h3>Cadeira Extensora</h3>
          <div class="meta"><span>S√©ries: 3x10+10+10 (Drop)</span><span>Carga: 0kg</span><span>Intervalo: 60s</span></div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-machine-leg-extension-side.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row"><button class="btn ghost interval" data-seconds="60">Intervalo 60s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:60</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="q7">
          <h3>Cadeira Extensora Unilateral</h3>
          <div class="meta"><span>S√©ries: 3x10+10+10 (Drop)</span><span>Carga: 0kg</span><span>Intervalo: 60s</span></div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/machines/_1080/Single_Leg_Extension_FR_1080.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row"><button class="btn ghost interval" data-seconds="60">Intervalo 60s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:60</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="q8">
          <h3>Leg Press 45 Unilateral</h3>
          <div class="meta"><span>S√©ries: 3x12 ‚Ä¢ 3x10 ‚Ä¢ 2x8</span><span>Carga: 0kg</span><span>Intervalo: 60s</span></div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/machines/_1080/Leg_Press_FR_1080.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row"><button class="btn ghost interval" data-seconds="60">Intervalo 60s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:60</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="q9">
          <h3>Abdu√ß√£o de Quadril M√°quina (extra)</h3>
          <div class="meta"><span>S√©ries: 3x10+10+10 (Drop)</span><span>Carga: 0kg</span><span>Intervalo: 60s</span></div>
          <div class="video-wrap">
            <video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/machines/_1080/Hip_Abduction_FR_1080.mp4" muted playsinline></video>
            <div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div>
          </div>
          <div class="row"><button class="btn ghost interval" data-seconds="60">Intervalo 60s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:60</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

      </div>
    </section>

    <!-- Se√ß√£o Peito, Tr√≠ceps e B√≠ceps -->
    <section class="section" data-section="ptb">
      <div class="section-header">
        <div class="section-title"><span>Peito, Tr√≠ceps e B√≠ceps</span> <span class="muted" data-count="ptb">(0/12)</span></div>
        <div class="section-toggle" role="button" aria-expanded="true">‚àí</div>
      </div>
      <div class="section-content">

        <article class="card" data-id="ptb1"><h3>Alongamento de Ombros e Tr√≠ceps II</h3>
          <div class="meta"><span>S√©ries: 3x20</span><span>Carga: 0kg</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-shoulders-stretch-variation-1-front.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="ptb2"><h3>Bike Spinning (Sentada)</h3>
          <div class="meta"><span>S√©ries: 40 reps</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Cardio-stationary-bike-side.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="40">Intervalo 40s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:40</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="ptb3"><h3>Abdominal Supra Solo</h3>
          <div class="meta"><span>S√©ries: 5x15</span><span>Intervalo: 40s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/bodyweight/_1080/Crunch_FR_1080.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="40">Intervalo 40s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:40</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="ptb4"><h3>Tr√≠ceps Unilateral na Polia (Pegada Neutra)</h3>
          <div class="meta"><span>S√©ries: 3x15</span><span>Intervalo: 30s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Cables-cable-single-arm-rope-pushdown-side.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="ptb5"><h3>Alongamento de Peitoral (Espaldar)</h3>
          <div class="meta"><span>S√©ries: 3x15</span><span>Intervalo: 40s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-chest-stretch-variation-1-side.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="40">Intervalo 40s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:40</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="ptb6"><h3>Mobilidade de Ombro III</h3>
          <div class="meta"><span>S√©ries: 3x20</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Recovery-thoracic-extensions-via-shoulder-flexion-foam-roller-front.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="ptb7"><h3>Rosca Alternada com Halteres</h3>
          <div class="meta"><span>S√©ries: 3x15</span><span>Intervalo: 30s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-curl-side.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="ptb8"><h3>Tr√≠ceps na Polia com Corda (Lento + Curto)</h3>
          <div class="meta"><span>S√©ries: 3x15 (lento + 15 curto)</span><span>Intervalo: 30s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Cables-cable-push-down-side.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="ptb9"><h3>Tr√≠ceps Unilateral Polia Alta (Neutra)</h3>
          <div class="meta"><span>S√©ries: 3x15</span><span>Intervalo: 30s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Cables-cable-single-arm-rope-pushdown-side.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="ptb10"><h3>Crucifixo com Halteres</h3>
          <div class="meta"><span>S√©ries: 4x12</span><span>Intervalo: 30s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-dumbbell-incline-chest-fly-front.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="ptb11"><h3>Crucifixo Inclinado com Halteres</h3>
          <div class="meta"><span>S√©ries: 4x12</span><span>Intervalo: 30s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-dumbbell-incline-chest-flys-side.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="ptb12"><h3>Rosca Martelo com Halteres</h3>
          <div class="meta"><span>S√©ries: 4x12</span><span>Intervalo: 30s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-hammer-curl-side.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

      </div>
    </section>

    <!-- Se√ß√£o Ombro & Costas -->
    <section class="section" data-section="oc">
      <div class="section-header">
        <div class="section-title"><span>Ombro &amp; Costas</span> <span class="muted" data-count="oc">(0/9)</span></div>
        <div class="section-toggle" role="button" aria-expanded="true">‚àí</div>
      </div>
      <div class="section-content">

        <article class="card" data-id="oc1"><h3>Puxada Alta (Pegada Neutra)</h3>
          <div class="meta"><span>S√©ries: 3x10/8/6 (Drop)</span><span>Intervalo: 30s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-machine-pulldown-side.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="oc2"><h3>Abdominal Canivete</h3>
          <div class="meta"><span>S√©ries: 3x12</span><span>Intervalo: 30s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/bodyweight/_1080/V-Up_FR_1080.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="oc3"><h3>Esteira Caminhada</h3>
          <div class="meta"><span>S√©ries: 40 reps</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Cardio-treadmill-walk-side.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="40">Intervalo 40s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:40</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="oc4"><h3>Eleva√ß√£o Lateral Unilateral (Sentado)</h3>
          <div class="meta"><span>S√©ries: 3x10/8/6 (Drop)</span><span>Intervalo: 30s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-neutral-overhead-press-side.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div><!-- (v√≠deo mais pr√≥ximo dispon√≠vel) -->
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="oc5"><h3>Eleva√ß√£o Frontal Alternada</h3>
          <div class="meta"><span>S√©ries: 3x12</span><span>Carga: 4‚Äì6kg</span><span>Intervalo: 30s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-Dumbbells-dumbbell-front-raise-side.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="oc6"><h3>Desenvolvimento com Halteres (Pegada Neutra)</h3>
          <div class="meta"><span>S√©ries: 3x10/8/6 (Drop)</span><span>Intervalo: 30s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/dumbbells/_1080/Neutral_Grip_DB_Press_FR_1080.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="oc7"><h3>Puxada Neutra (Tri√¢ngulo)</h3>
          <div class="meta"><span>S√©ries: 3x10/8/6 (Drop)</span><span>Intervalo: 30s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/cables/_1080/Seated_Row_V_Grip_FR_1080.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div><!-- (remada/puxada V-grip pr√≥xima ao pedido) -->
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="oc8"><h3>Remada Baixa (Tri√¢ngulo)</h3>
          <div class="meta"><span>S√©ries: 3x10/8/6 (Drop)</span><span>Intervalo: 30s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-machine-seated-cable-row-front.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div>
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

        <article class="card" data-id="oc9"><h3>Puxada Aberta (Barra Reta)</h3>
          <div class="meta"><span>S√©ries: 3x10/8/6 (Drop)</span><span>Intervalo: 30s</span></div>
          <div class="video-wrap"><video class="exercise" src="https://media.musclewiki.com/media/uploads/videos/branded/female-machine-pulldown-side.mp4" muted playsinline></video><div class="overlay"><div class="control">‚ñ∂Ô∏è</div></div></div><!-- (varia√ß√£o pr√≥xima) -->
          <div class="row"><button class="btn ghost interval" data-seconds="30">Intervalo 30s</button><div class="finish">‚ûî</div><div class="spacer"></div><div class="timer"><strong>00:30</strong><div class="timer-overlay"><div class="control">‚è∏Ô∏è</div></div><div class="ripple"></div></div></div>
        </article>

      </div>
    </section>
  </main>

  <script>
    /* =========================
       Estado & utilidades
    ========================== */
    const $ = (q, root=document) => root.querySelector(q);
    const $$ = (q, root=document) => Array.from(root.querySelectorAll(q));

    const assistantToast = $("#assistantToast");
    const systemToast = $("#systemToast");
    const assistantToggle = $("#assistantToggle");
    const assistantPanel = $("#assistantPanel");

    // Estado persistente
    let assistantOn = localStorage.getItem("assistantOn") !== null ? JSON.parse(localStorage.getItem("assistantOn")) : true;
    let voiceMode   = localStorage.getItem("voiceMode")   !== null ? JSON.parse(localStorage.getItem("voiceMode"))   : true;
    const doneCards = new Set(JSON.parse(localStorage.getItem("doneCards") || "[]")); // IDs de cards conclu√≠dos
    const sectionState = JSON.parse(localStorage.getItem("sectionState") || "{}");    // {sectionKey: expanded:boolean}
    let videoScale = +(localStorage.getItem("videoScale") || 120);

    /* =========================
       Assistente Minimalista üí°
    ========================== */
    const categories = {
      motivacao: [
        "Consist√™ncia vence intensidade.",
        "Cada repeti√ß√£o te deixa mais forte üöÄ.",
        "Foca no movimento, n√£o na pressa.",
        "Voc√™ j√° venceu por estar aqui üëä.",
        "Pequenos passos geram grandes resultados.",
        "Confia no processo ‚Äî o resultado vem."
      ],
      saude: [
        "N√£o esquece da √°gua üíß.",
        "Respira pelo nariz e solta pela boca.",
        "Se doer estranho, pausa e ajusta.",
        "Alongar tamb√©m √© treinar ‚Äî n√£o pula!",
        "Postura neutra protege suas articula√ß√µes.",
        "Movimento controlado, sem balan√ßo."
      ],
      tecnica: [
        "Ativa o core nesse exerc√≠cio.",
        "Coluna neutra e peito aberto.",
        "Desce controlando, sobe com for√ßa!",
        "Procura a contra√ß√£o m√°xima.",
        "Evita compensar com outros m√∫sculos.",
        "Alinha os joelhos com os p√©s."
      ],
      intervalo: [
        "Aproveita o descanso, mas n√£o enrola ‚è±Ô∏è.",
        "Solta a tens√£o dos ombros, respira fundo.",
        "Relaxa agora e prepara o pr√≥ximo.",
        "Intervalo √© curto: foca no tempo.",
        "Usa o intervalo pra hidratar.",
        "Sem celular agora ‚Äî foco!"
      ],
      conclusao: [
        "Boa! Mais uma s√©rie conclu√≠da üëè.",
        "Treino finalizado, parab√©ns pelo foco!",
        "Agora alonga pra fechar bem ‚úÖ.",
        "Voc√™ mandou muito hoje üî•.",
        "Meta cumprida! Orgulhe-se.",
        "Mais um dia de vit√≥ria üèÜ."
      ]
    };
    let allPhrases = Object.values(categories).flat();
    // Embaralhar
    for (let i = allPhrases.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random()*(i+1)); [allPhrases[i], allPhrases[j]] = [allPhrases[j], allPhrases[i]];
    }
    let phraseIndex = 0;

    function updateAssistantIndicator() {
      assistantToggle.classList.remove("on","textonly","off");
      if (!assistantOn) assistantToggle.classList.add("off");
      else if (voiceMode) assistantToggle.classList.add("on");
      else assistantToggle.classList.add("textonly");
    }
    function speak(text) {
      if (!voiceMode || !assistantOn) return;
      if (!("speechSynthesis" in window)) return;
      const u = new SpeechSynthesisUtterance(text);
      u.lang = "pt-BR";
      window.speechSynthesis.speak(u);
    }
    function showAssistantMessage(custom) {
      if (!assistantOn) return;
      const msg = custom || allPhrases[phraseIndex];
      phraseIndex = (phraseIndex + 1) % allPhrases.length;

      assistantToast.textContent = "üí° " + msg;
      assistantToast.classList.add("show");
      assistantToggle.classList.add("pulse");
      setTimeout(()=>assistantToggle.classList.remove("pulse"), 600);
      speak(msg);

      setTimeout(()=>assistantToast.classList.remove("show"), 3800);
    }
    // ciclo autom√°tico a cada 20s
    setInterval(()=> showAssistantMessage(), 20000);

    // Toggle painel/estados
    assistantToggle.addEventListener("click", () => {
      assistantPanel.style.display = assistantPanel.style.display === "flex" ? "none" : "flex";
    });
    assistantPanel.addEventListener("click", (ev) => {
      if (ev.target.matches("button[data-mode]")) {
        const mode = ev.target.getAttribute("data-mode");
        if (mode === "voice") { assistantOn = true; voiceMode = true; }
        else if (mode === "text") { assistantOn = true; voiceMode = false; }
        else { assistantOn = false; }
        localStorage.setItem("assistantOn", JSON.stringify(assistantOn));
        localStorage.setItem("voiceMode", JSON.stringify(voiceMode));
        assistantPanel.style.display = "none";
        updateAssistantIndicator();
      }
    });

    /* =========================
       V√≠deos ‚Äî play/pause no toque,
       overlay suave e escala a ~1.02
    ========================== */
    function initVideo(v) {
      const wrap = v.closest(".video-wrap");
      const overlay = $(".overlay", wrap);
      function showOverlayTmp(icon) {
        if (icon) $(".control", overlay).textContent = icon;
        overlay.classList.add("show");
        setTimeout(()=> overlay.classList.remove("show"), 350);
      }
      wrap.addEventListener("click", () => {
        if (v.paused) { v.play(); showOverlayTmp("‚è∏Ô∏è"); }
        else { v.pause(); showOverlayTmp("‚ñ∂Ô∏è"); }
      });
      // aplicar escala do video via config
      v.style.transform = `scale(${videoScale/100})`;
    }
    $$(".exercise").forEach(initVideo);

    /* =========================
       Timer por card ‚Äî inicia ao clicar no bot√£o,
       pausa/resume no toque sobre o c√≠rculo, overlay sutil,
       vibra aos 5s restantes e som clean ao fim.
    ========================== */
    function beepEnd() {
      // WebAudio: ‚Äúping‚Äù clean
      try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const o = ctx.createOscillator(); const g = ctx.createGain();
        o.type = "sine"; o.frequency.value = 880;
        o.connect(g); g.connect(ctx.destination);
        g.gain.setValueAtTime(0.0001, ctx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.15, ctx.currentTime + 0.01);
        o.start();
        g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.20);
        o.stop(ctx.currentTime + 0.22);
      } catch (e) {}
    }

    function handleInterval(btn) {
      const card = btn.closest(".card");
      const timer = $(".timer", card);
      const strong = $("strong", timer);
      const overlay = $(".timer-overlay", timer);
      const ripple = $(".ripple", timer);
      const secs = +btn.dataset.seconds || 60;

      let remaining = secs;
      let running = false;
      let tick = null;

      function render() {
        strong.textContent = `00:${String(remaining).padStart(2, "0")}`;
        const progress = (1 - (remaining / secs)) * 100;
        timer.style.setProperty("--p", progress + "%");
      }
      function start() {
        if (running) return;
        running = true; overlay.classList.remove("show");
        timer.classList.add("show");
        render();
        // vibra√ß√£o a 5s
        tick = setInterval(() => {
          remaining--;
          render();
          if (remaining === 5 && "vibrate" in navigator) navigator.vibrate(60);
          if (remaining <= 0) {
            clearInterval(tick); running = false; remaining = 0; render(); beepEnd();
            overlay.classList.add("show"); // reaparece para permitir reset no toque
          }
        }, 1000);
        ripple.classList.remove("pause"); ripple.classList.add("play");
        setTimeout(()=> ripple.classList.remove("play"), 460);
      }
      function pause() {
        if (!running) return;
        running = false;
        clearInterval(tick);
        overlay.classList.add("show");
        ripple.classList.remove("play"); ripple.classList.add("pause");
        setTimeout(()=> ripple.classList.remove("pause"), 460);
      }
      function toggle() {
        running ? pause() : start();
      }
      // Abre e inicia imediatamente
      timer.classList.add("show");
      remaining = secs; render(); start();

      // Clique para pausar/retomar (overlay reaparece no pause)
      timer.addEventListener("click", toggle, { once: false });

      // Se o card colapsar (via se√ß√£o), ocultar timer com precis√£o
      const section = card.closest(".section");
      const sc = $(".section-content", section);
      const mo = new MutationObserver(()=> {
        if (sc.classList.contains("collapsed")) {
          pause();
          timer.classList.remove("show");
        }
      });
      mo.observe(sc, { attributes: true, attributeFilter: ["class"] });
    }
    $$(".interval").forEach(b => b.addEventListener("click", () => handleInterval(b)));

    /* =========================
       Concluir Card ‚Äî efeito cascata + persist√™ncia
    ========================== */
    function updateSectionCounters() {
      const sections = [
        { key: "posterior", total: 8, el: $('[data-count="posterior"]') },
        { key: "quad",      total: 9, el: $('[data-count="quad"]')      },
        { key: "ptb",       total: 12, el: $('[data-count="ptb"]')      },
        { key: "oc",        total: 9, el: $('[data-count="oc"]')        },
      ];
      const counts = { posterior:0, quad:0, ptb:0, oc:0 };
      doneCards.forEach(id => {
        if (id.startsWith("p")) counts.posterior++;
        else if (id.startsWith("q")) counts.quad++;
        else if (id.startsWith("ptb")) counts.ptb++;
        else if (id.startsWith("oc")) counts.oc++;
      });
      sections.forEach(s => s.el && (s.el.textContent = `(${counts[s.key]}/${s.total})`));
    }
    function markDone(card, done=true) {
      card.classList.toggle("done", done);
      const id = card.dataset.id;
      if (done) doneCards.add(id); else doneCards.delete(id);
      localStorage.setItem("doneCards", JSON.stringify(Array.from(doneCards)));
      updateSectionCounters();
      // efeito cascata (fundo transl√∫cido j√° vem por .done)
    }
    $$(".finish").forEach(btn => {
      btn.addEventListener("click", (e) => {
        const card = e.currentTarget.closest(".card");
        const isDone = card.classList.contains("done");
        markDone(card, !isDone);
      });
    });

    /* =========================
       Expandir/Recolher ‚Äî sincronizado
    ========================== */
    const expandAllBtn = $("#expandAll");
    function setSectionExpanded(sectionEl, expanded) {
      const key = sectionEl.dataset.section;
      const content = $(".section-content", sectionEl);
      const toggle = $(".section-toggle", sectionEl);
      content.classList.toggle("collapsed", !expanded);
      toggle.textContent = expanded ? "‚àí" : "Ôºã";
      toggle.setAttribute("aria-expanded", String(expanded));
      sectionState[key] = expanded;
      localStorage.setItem("sectionState", JSON.stringify(sectionState));
    }
    $$(".section").forEach(sec => {
      // estado salvo
      const key = sec.dataset.section;
      const expanded = sectionState[key] !== undefined ? sectionState[key] : true;
      setSectionExpanded(sec, expanded);
      // toggle por se√ß√£o
      $(".section-header", sec).addEventListener("click", () => {
        const now = !$(".section-content", sec).classList.contains("collapsed");
        setSectionExpanded(sec, !now);
        syncMasterToggle();
      });
    });
    function syncMasterToggle() {
      const sections = $$(".section");
      const opened = sections.filter(s => !$(".section-content", s).classList.contains("collapsed")).length;
      if (opened === 0) expandAllBtn.textContent = "Ôºã";
      else if (opened === sections.length) expandAllBtn.textContent = "‚àí";
      else expandAllBtn.textContent = "¬±"; // estado misto (dica visual)
    }
    expandAllBtn.addEventListener("click", () => {
      const sections = $$(".section");
      const allClosed = sections.every(s => $(".section-content", s).classList.contains("collapsed"));
      const target = allClosed ? true : false;
      sections.forEach(s => setSectionExpanded(s, target));
      syncMasterToggle();
    });

    /* =========================
       Painel de Configura√ß√£o ‚Äî tamanho do v√≠deo (persistente)
    ========================== */
    const scaleInput = $("#videoScale");
    const scaleVal = $("#videoScaleVal");
    function applyVideoScale(val) {
      $$(".exercise").forEach(v => v.style.transform = `scale(${val/100})`);
      scaleVal.textContent = `${val}%`;
      localStorage.setItem("videoScale", String(val));
    }
    scaleInput.value = videoScale; applyVideoScale(videoScale);
    scaleInput.addEventListener("input", (e)=> applyVideoScale(+e.target.value));

    /* =========================
       Reset geral ‚Äî limpa conclu√≠dos, timers, se√ß√µes, etc.
    ========================== */
    function showSystemToast(text) {
      assistantToast.classList.remove("show"); // evitar poluir
      systemToast.textContent = text;
      systemToast.classList.add("show");
      setTimeout(()=> systemToast.classList.remove("show"), 2600);
    }
    $("#resetAll").addEventListener("click", () => {
      // limpar cart√µes
      doneCards.clear();
      localStorage.setItem("doneCards", "[]");
      $$(".card.done").forEach(c => c.classList.remove("done"));
      updateSectionCounters();
      // timers
      $$(".timer").forEach(t => { t.classList.remove("show"); t.style.setProperty("--p","0%"); $("strong", t).textContent = "00:00"; });
      // se√ß√µes -> todas abertas
      $$(".section").forEach(sec => setSectionExpanded(sec, true));
      syncMasterToggle();
      showSystemToast("Reset aplicado");
    });

    /* =========================
       Inicializa√ß√£o
    ========================== */
    function restoreDoneCards() {
      doneCards.forEach(id => {
        const card = document.querySelector(`.card[data-id="${id}"]`);
        if (card) card.classList.add("done");
      });
      updateSectionCounters();
    }

    window.addEventListener("load", () => {
      restoreDoneCards();
      updateAssistantIndicator();
      showAssistantMessage(); // primeira sugest√£o autom√°tica
      syncMasterToggle();
    });

    // Fechar painel da assistente ao clicar fora
    document.addEventListener("click", (e) => {
      if (e.target.id === "assistantToggle") return;
      if (!assistantPanel.contains(e.target)) assistantPanel.style.display = "none";
    });
  </script>
</body>
</html>
